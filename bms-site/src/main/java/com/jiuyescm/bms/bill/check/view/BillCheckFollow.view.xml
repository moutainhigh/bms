<?xml version="1.0" encoding="UTF-8"?>
<ViewConfig>
  <Arguments/>
  <Context/>
  <Model>
    <DataType name="dtBillCheckInfoFollowEntity">
      <Property name="creationType">com.jiuyescm.bms.bill.check.vo.BillCheckInfoFollowVo</Property>
      <PropertyDef name="id">
        <Property name="dataType">Integer</Property>
        <Property name="label">账单编号</Property>
      </PropertyDef>
      <PropertyDef name="createMonth">
        <Property name="dataType">Integer</Property>
        <Property name="label">业务月份</Property>
      </PropertyDef>
      <PropertyDef name="invoiceName">
        <Property></Property>
        <Property name="label">商家合同名称</Property>
      </PropertyDef>
      <PropertyDef name="billName">
        <Property></Property>
        <Property name="label">账单名称</Property>
      </PropertyDef>
      <PropertyDef name="customerName">
        <Property></Property>
        <Property name="label">bms商家名称</Property>
      </PropertyDef>
      <PropertyDef name="billStartTime">
        <Property name="dataType">Long</Property>
        <Property name="label">业务启动时间</Property>
      </PropertyDef>
      <PropertyDef name="firstClassName">
        <Property></Property>
        <Property name="label">一级品类</Property>
      </PropertyDef>
      <PropertyDef name="bizTypeName">
        <Property></Property>
        <Property name="label">业务类型</Property>
      </PropertyDef>
      <PropertyDef name="projectName">
        <Property></Property>
        <Property name="label">项目</Property>
      </PropertyDef>
      <PropertyDef name="sellerName">
        <Property></Property>
        <Property name="label">销售员名称</Property>
      </PropertyDef>
      <PropertyDef name="deptName">
        <Property></Property>
        <Property name="label">责任部门名称</Property>
      </PropertyDef>
      <PropertyDef name="deptCode">
        <Property></Property>
        <Property name="label">责任部门编码</Property>
      </PropertyDef>
      <PropertyDef name="projectManagerName">
        <Property></Property>
        <Property name="label">项目管理员</Property>
      </PropertyDef>
      <PropertyDef name="balanceName">
        <Property></Property>
        <Property name="label">结算员</Property>
      </PropertyDef>
      <PropertyDef name="billStatus">
        <Property></Property>
        <Property name="label">账单状态</Property>
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;bmsDictionaryEnum#getCheckBillStatusMap&quot;).getResult()}</Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="billCheckStatus">
        <Property></Property>
        <Property name="label">对账状态</Property>
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;bmsDictionaryEnum#getBillCheckStateMap&quot;).getResult()}</Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="billConfirmDate">
        <Property name="dataType">Long</Property>
        <Property name="label">账单确认日期</Property>
      </PropertyDef>
      <PropertyDef name="invoiceStatus">
        <Property></Property>
        <Property name="label">开票状态</Property>
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;bmsDictionaryEnum#getBillCheckInvoiceStateMap&quot;).getResult()}</Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="expectAmount">
        <Property name="dataType">BigDecimal</Property>
        <Property name="label">预计金额</Property>
      </PropertyDef>
      <PropertyDef name="confirmAmount">
        <Property name="dataType">BigDecimal</Property>
        <Property name="label">最终确认额</Property>
      </PropertyDef>
      <PropertyDef name="invoiceAmount">
        <Property name="dataType">BigDecimal</Property>
        <Property name="label">发票金额</Property>
      </PropertyDef>
      <PropertyDef name="invoiceDate">
        <Property name="dataType">Long</Property>
        <Property name="label">开票日期</Property>
      </PropertyDef>
      <PropertyDef name="expectReceiptDate">
        <Property name="dataType">Long</Property>
        <Property name="label">预计回款日期</Property>
      </PropertyDef>
      <PropertyDef name="unReceiptAmount">
        <Property name="dataType">BigDecimal</Property>
        <Property name="label">未收款金额</Property>
      </PropertyDef>
      <PropertyDef name="invoiceUnReceiptAmount">
        <Property name="dataType">BigDecimal</Property>
        <Property name="label">开票未回款金额</Property>
      </PropertyDef>
      <PropertyDef name="receiptAmount">
        <Property name="dataType">BigDecimal</Property>
        <Property name="label">收款金额</Property>
      </PropertyDef>
      <PropertyDef name="receiptDate">
        <Property name="dataType">Long</Property>
        <Property name="label">收款日期</Property>
      </PropertyDef>
      <PropertyDef name="creator">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="lastModifier">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="delFlag">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="remark">
        <Property></Property>
        <Property name="label">备注</Property>
      </PropertyDef>
      <PropertyDef name="billExcelUrl">
        <Property></Property>
        <Property name="label">账单下载地址</Property>
      </PropertyDef>
      <PropertyDef name="confirmDate">
        <Property name="dataType">Long</Property>
        <Property name="label">确认日期</Property>
      </PropertyDef>
      <PropertyDef name="confirmMan">
        <Property></Property>
        <Property name="label">确认人</Property>
      </PropertyDef>
      <PropertyDef name="isneedInvoice">
        <Property></Property>
        <Property name="label">是否需要发票</Property>
      </PropertyDef>
      <PropertyDef name="invoiceMan">
        <Property></Property>
        <Property name="label">开票人</Property>
      </PropertyDef>
      <PropertyDef name="receiptMan">
        <Property></Property>
        <Property name="label">收款人</Property>
      </PropertyDef>
      <PropertyDef name="receiptStatus">
        <Property></Property>
        <Property name="label">收款状态</Property>
      </PropertyDef>
      <PropertyDef name="followId">
        <Property name="label">账单跟进表主键</Property>
      </PropertyDef>
      <PropertyDef name="startTime">
        <Property name="label">账单问题开始日期</Property>
        <Property name="dataType">DateTime</Property>
      </PropertyDef>
      <PropertyDef name="endTime">
        <Property name="label">账单问题结束日期</Property>
        <Property name="dataType">DateTime</Property>
      </PropertyDef>
      <PropertyDef name="takesTime">
        <Property name="label">账单问题跟进时效</Property>
      </PropertyDef>
      <PropertyDef name="followState">
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;billCheckFollowController#getProcessState&quot;).getResult()}</Property>
        </Property>
        <Property name="label">处理状态</Property>
      </PropertyDef>
      <PropertyDef name="followMan">
        <Property name="label">跟进人</Property>
      </PropertyDef>
      <PropertyDef name="followManId">
        <Property name="label">跟进人ID</Property>
      </PropertyDef>
      <PropertyDef name="followDept">
        <Property name="label">跟进人部门</Property>
      </PropertyDef>
      <PropertyDef name="confirmUnInvoiceAmount">
        <Property name="dataType">BigDecimal</Property>
        <Property name="label">已确认未开票金额</Property>
      </PropertyDef>
      <PropertyDef name="badBillAmount">
        <Property name="dataType">BigDecimal</Property>
      </PropertyDef>
      <PropertyDef name="followDeptId">
        <Property></Property>
      </PropertyDef>
    </DataType>
    <DataType name="dtBillCheckInfoFollowQuery">
      <PropertyDef name="createMonthStart">
        <Property name="dataType">Integer</Property>
        <Property name="label">业务月份</Property>
      </PropertyDef>
      <PropertyDef name="createMonthEnd">
        <Property name="dataType">Integer</Property>
        <Property name="label">-</Property>
      </PropertyDef>
      <PropertyDef name="invoiceName">
        <Property></Property>
        <Property name="label">商家合同名称</Property>
      </PropertyDef>
      <PropertyDef name="billName">
        <Property></Property>
        <Property name="label">账单名称</Property>
      </PropertyDef>
      <PropertyDef name="followState">
        <Property name="label">处理状态</Property>
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;billCheckFollowController#getProcessState&quot;).getResult()}</Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="balanceName">
        <Property name="label">结算员</Property>
      </PropertyDef>
    </DataType>
    <DataType name="dtBillCheckLog">
      <Property name="creationType">com.jiuyescm.bms.billcheck.vo.BillCheckLogVo</Property>
      <PropertyDef name="id">
        <Property name="dataType">Long</Property>
      </PropertyDef>
      <PropertyDef name="billCheckId">
        <Property name="dataType">Integer</Property>
        <Property name="label">对账主表ID</Property>
      </PropertyDef>
      <PropertyDef name="billStatusCode">
        <Property></Property>
        <Property name="label">处理状态</Property>
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;billCheckFollowController#getProcessState&quot;).getResult()}</Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="deptId">
        <Property></Property>
        <Property name="label">部门编号</Property>
      </PropertyDef>
      <PropertyDef name="deptName">
        <Property></Property>
        <Property name="label">部门名称</Property>
      </PropertyDef>
      <PropertyDef name="fileName">
        <Property></Property>
        <Property name="label">附件名称</Property>
      </PropertyDef>
      <PropertyDef name="fileUrl">
        <Property></Property>
        <Property name="label">附件地址</Property>
      </PropertyDef>
      <PropertyDef name="operateDesc">
        <Property></Property>
        <Property name="label">操作明细</Property>
      </PropertyDef>
      <PropertyDef name="delFlag">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="creator">
        <Property></Property>
        <Property name="label">创建人</Property>
      </PropertyDef>
      <PropertyDef name="createTime">
        <Property name="dataType">DateTime</Property>
        <Property name="label">时间</Property>
      </PropertyDef>
      <PropertyDef name="lastModifier">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="logType">
        <Property name="dataType">Integer</Property>
      </PropertyDef>
      <PropertyDef name="billFollowState">
        <Property name="label">处理状态</Property>
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;billCheckFollowController#getProcessState&quot;).getResult()}</Property>
        </Property>
      </PropertyDef>
    </DataType>
    <DataType name="dtBillCheckFollowEntity">
      <Property name="creationType">com.jiuyescm.bms.bill.check.vo.BillCheckFollowVo</Property>
      <PropertyDef name="id">
        <Property name="dataType">int</Property>
      </PropertyDef>
      <PropertyDef name="billCheckId">
        <Property name="dataType">int</Property>
        <Property name="label">账单编号</Property>
      </PropertyDef>
      <PropertyDef name="takesTime">
        <Property name="dataType">Integer</Property>
        <Property name="label">跟进时效</Property>
      </PropertyDef>
      <PropertyDef name="appointMan">
        <Property></Property>
        <Property name="label">指派人</Property>
      </PropertyDef>
      <PropertyDef name="appointDeptId">
        <Property></Property>
        <Property name="label">指派部门</Property>
      </PropertyDef>
      <PropertyDef name="followMan">
        <Property></Property>
        <Property name="label">跟进人</Property>
      </PropertyDef>
      <PropertyDef name="followDeptId">
        <Property></Property>
        <Property name="label">跟进部门</Property>
      </PropertyDef>
      <PropertyDef name="delFlag">
        <Property></Property>
        <Property name="label">作废标记</Property>
      </PropertyDef>
      <PropertyDef name="remark">
        <Property></Property>
        <Property name="label">详细描述</Property>
      </PropertyDef>
      <PropertyDef name="fileName">
        <Property></Property>
        <Property name="label">文件名称</Property>
      </PropertyDef>
      <PropertyDef name="filePath">
        <Property></Property>
        <Property name="label">文件路径</Property>
      </PropertyDef>
      <PropertyDef name="billStatus">
        <Property></Property>
        <Property name="label">账单状态</Property>
      </PropertyDef>
      <PropertyDef name="appointManId">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="appointDept">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="followState">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="followManId">
        <Property></Property>
        <Property name="label">跟进人</Property>
      </PropertyDef>
      <PropertyDef name="followDept">
        <Property></Property>
        <Property name="label">跟进部门</Property>
      </PropertyDef>
      <PropertyDef name="startTime">
        <Property name="dataType">DateTime</Property>
      </PropertyDef>
      <PropertyDef name="endTime">
        <Property name="dataType">DateTime</Property>
      </PropertyDef>
      <PropertyDef name="followState">
        <Property name="label">跟进处理状态</Property>
      </PropertyDef>
      <PropertyDef name="email">
        <Property></Property>
      </PropertyDef>
      <PropertyDef name="billName">
        <Property></Property>
      </PropertyDef>
    </DataType>
  </Model>
  <View>
    <DataSet id="dsBillCheckFollow">
      <Property name="dataType">[dtBillCheckFollowEntity]</Property>
    </DataSet>
    <DataSet id="dsBillCheckCallBack">
      <ClientEvent name="onCreate">&#xD;
</ClientEvent>
      <Property name="dataType">[dtBillCheckFollowEntity]</Property>
    </DataSet>
    <DataSet id="dsBillCheckInfoFollow">
      <Property name="dataType">[dtBillCheckInfoFollowEntity]</Property>
      <Property name="pageSize">20</Property>
      <Property name="dataProvider">billCheckFollowController#queryAll</Property>
    </DataSet>
    <DataSet id="dsBillCheckInfoFollowQuery">
      <ClientEvent name="onCreate">view.get(&quot;#dsBillCheckInfoFollowQuery&quot;).insert();&#xD;
</ClientEvent>
      <Property name="dataType">[dtBillCheckInfoFollowQuery]</Property>
    </DataSet>
    <DataSet id="dsBillCheckLog">
      <ClientEvent name="onCreate">&#xD;
</ClientEvent>
      <Property name="dataType">[dtBillCheckLog]</Property>
      <Property name="dataProvider">billCheckInfoController#queryLogAll</Property>
      <Property name="pageSize">20</Property>
      <Property name="loadMode">manual</Property>
    </DataSet>
    <ToolBar>
      <DataPilot>
        <Property name="dataSet">dsBillCheckInfoFollow</Property>
        <Property name="itemCodes">pages,pageSize</Property>
      </DataPilot>
      <Separator/>
      <ToolBarButton>
        <ClientEvent name="onClick">var data=view.get(&quot;#dsBillCheckInfoFollowQuery.data&quot;).current;&#xD;
view.get(&quot;#dsBillCheckInfoFollow&quot;).set(&quot;parameter&quot;,data).flushAsync();&#xD;
</ClientEvent>
        <Property name="caption">查询</Property>
        <Property name="icon">url(>skin>common/icons.gif) -20px -40px</Property>
      </ToolBarButton>
      <Separator/>
      <ToolBarButton>
        <ClientEvent name="onClick">&#xD;
view.get(&quot;#dsBillCheckFollow&quot;).insert();&#xD;
view.id(&quot;txtFileName2&quot;).set(&quot;text&quot;,&quot;&quot;);&#xD;
var data=view.get(&quot;#dsBillCheckInfoFollow.data&quot;).current;&#xD;
if(data){&#xD;
	var entity=view.get(&quot;#dsBillCheckFollow.data&quot;).current;&#xD;
	entity.set({&#xD;
		billCheckId:data.get(&quot;id&quot;),&#xD;
		id:data.get(&quot;followId&quot;),&#xD;
		billStatus:data.get(&quot;billStatus&quot;)&#xD;
	});&#xD;
	view.get(&quot;#dialogZp&quot;).show();&#xD;
}else{&#xD;
	dorado.MessageBox.alert(&quot;请先选择账单!&quot;)&#xD;
}</ClientEvent>
        <Property name="caption">问题指派</Property>
        <Property name="icon">url(>skin>common/icons.gif) -140px -100px</Property>
      </ToolBarButton>
      <Separator/>
      <ToolBarButton>
        <ClientEvent name="onClick">view.get(&quot;#dsBillCheckCallBack&quot;).insert();&#xD;
view.id(&quot;txtFileName&quot;).set(&quot;text&quot;,&quot;&quot;);&#xD;
var data=view.get(&quot;#dsBillCheckInfoFollow.data&quot;).current;&#xD;
if(data){&#xD;
	&#xD;
	var followState=data.get(&quot;followState&quot;);&#xD;
	//alert(followState);&#xD;
	if(followState==null||followState==''){&#xD;
		dorado.MessageBox.alert(&quot;请先指派问题!&quot;);&#xD;
		return;&#xD;
	}&#xD;
				     &#xD;
	if(followState=='FINISH'){&#xD;
		dorado.MessageBox.alert(&quot;处理完成的问题无法继续反馈!&quot;);&#xD;
		return;&#xD;
	}&#xD;
	&#xD;
	var entity=view.get(&quot;#dsBillCheckCallBack.data&quot;).current;&#xD;
	&#xD;
	entity.set({&#xD;
		billCheckId:data.get(&quot;id&quot;),&#xD;
		id:data.get(&quot;followId&quot;),&#xD;
		startTime:data.get(&quot;startTime&quot;),&#xD;
		endTime:data.get(&quot;endTime&quot;),&#xD;
		billStatus:data.get(&quot;billStatus&quot;)&#xD;
	});&#xD;
	view.get(&quot;#dialogCallBack&quot;).show();&#xD;
}else{&#xD;
	dorado.MessageBox.alert(&quot;请先选择账单!&quot;);&#xD;
}&#xD;
</ClientEvent>
        <Property name="icon">url(>skin>common/icons.gif) -100px -120px</Property>
        <Property name="caption">问题反馈</Property>
      </ToolBarButton>
    </ToolBar>
    <AutoForm id="queryForm">
      <Property name="dataSet">dsBillCheckInfoFollowQuery</Property>
      <Property name="cols">200,120,200,200,200,200</Property>
      <AutoFormElement>
        <Property name="name">createMonthStart</Property>
        <Property name="property">createMonthStart</Property>
        <Editor/>
      </AutoFormElement>
      <AutoFormElement>
        <Property name="name">createMonthEnd</Property>
        <Property name="property">createMonthEnd</Property>
        <Property name="labelWidth">10</Property>
        <Property name="editorWidth">100</Property>
        <Editor/>
      </AutoFormElement>
      <AutoFormElement>
        <Property name="name">invoiceName</Property>
        <Property name="property">invoiceName</Property>
        <Property name="labelWidth">85</Property>
        <Editor/>
      </AutoFormElement>
      <AutoFormElement>
        <Property name="name">billName</Property>
        <Property name="property">billName</Property>
        <Editor/>
      </AutoFormElement>
      <AutoFormElement>
        <Property name="property">followState</Property>
        <Property name="name">followState</Property>
        <Editor/>
      </AutoFormElement>
      <AutoFormElement>
        <Property name="property">balanceName</Property>
        <Property name="name">balanceName</Property>
        <Property name="trigger">triggerBalanceSelect</Property>
        <Editor/>
      </AutoFormElement>
    </AutoForm>
    <Container>
      <DataGrid>
        <ClientEvent name="onDataRowDoubleClick">var entity=view.get(&quot;#dsBillCheckInfoFollow.data&quot;).current;&#xD;
with (view.get(&quot;#dsBillCheckLog&quot;)){&#xD;
	var followId=entity.get(&quot;followId&quot;);&#xD;
	if(!followId){&#xD;
		followId=-1;&#xD;
	}&#xD;
	//定义查询条件json结构&#xD;
	var queryJson={&#xD;
		billFollowId:followId&#xD;
	};&#xD;
	set(&quot;parameter&quot;, queryJson);&#xD;
	flushAsync();	&#xD;
}</ClientEvent>
        <Property name="dataSet">dsBillCheckInfoFollow</Property>
        <Property name="height">200</Property>
        <Property name="width">1500</Property>
        <Property name="readOnly">true</Property>
        <DataColumn>
          <Property name="property">followMan</Property>
          <Property name="name">followMan</Property>
          <Editor/>
        </DataColumn>
        <DataColumn>
          <Property name="property">followDept</Property>
          <Property name="name">followDept</Property>
          <Editor/>
        </DataColumn>
        <DataColumn>
          <Property name="name">startTime</Property>
          <Property name="property">startTime</Property>
          <Editor/>
        </DataColumn>
        <DataColumn>
          <Property name="name">endTime</Property>
          <Property name="property">endTime</Property>
          <Editor/>
        </DataColumn>
        <DataColumn>
          <Property name="name">takesTime</Property>
          <Property name="property">takesTime</Property>
          <Editor/>
        </DataColumn>
        <DataColumn name="createMonth">
          <Property name="property">createMonth</Property>
        </DataColumn>
        <DataColumn name="invoiceName">
          <Property name="property">invoiceName</Property>
        </DataColumn>
        <DataColumn name="billName">
          <Property name="property">billName</Property>
        </DataColumn>
        <DataColumn name="customerName">
          <Property name="property">customerName</Property>
          <Property name="visible">false</Property>
        </DataColumn>
        <DataColumn name="balanceName">
          <Property name="property">balanceName</Property>
        </DataColumn>
        <DataColumn name="projectManagerName">
          <Property name="property">projectManagerName</Property>
        </DataColumn>
        <DataColumn name="billStatus">
          <Property name="property">billStatus</Property>
        </DataColumn>
        <DataColumn name="billCheckStatus">
          <Property name="property">billCheckStatus</Property>
        </DataColumn>
        <DataColumn name="invoiceStatus">
          <Property name="property">invoiceStatus</Property>
        </DataColumn>
        <DataColumn>
          <Property name="name">followState</Property>
          <Property name="property">followState</Property>
          <Editor/>
        </DataColumn>
        <DataColumn name="expectAmount">
          <Property name="property">expectAmount</Property>
        </DataColumn>
        <DataColumn name="confirmAmount">
          <Property name="property">confirmAmount</Property>
        </DataColumn>
        <DataColumn name="billConfirmDate">
          <Property name="property">billConfirmDate</Property>
        </DataColumn>
      </DataGrid>
    </Container>
    <TabControl>
      <ControlTab>
        <Property name="caption">处理记录</Property>
        <Container>
          <ToolBar>
            <DataPilot>
              <Property name="dataSet">dsBillCheckLog</Property>
              <Property name="itemCodes">pages,pageSize</Property>
            </DataPilot>
          </ToolBar>
          <DataGrid>
            <ClientEvent name="onDataRowDoubleClick">view.get(&quot;#operDescDialog&quot;).show();</ClientEvent>
            <Property name="dataSet">dsBillCheckLog</Property>
            <Property name="readOnly">true</Property>
            <RowNumColumn/>
            <DataColumn name="createTime">
              <Property name="property">createTime</Property>
            </DataColumn>
            <DataColumn>
              <Property name="property">billFollowState</Property>
              <Property name="name">billFollowState</Property>
            </DataColumn>
            <DataColumn name="operateDesc">
              <Property name="property">operateDesc</Property>
            </DataColumn>
            <DataColumn name="creator">
              <Property name="property">creator</Property>
            </DataColumn>
            <DataColumn name="deptName">
              <Property name="property">deptName</Property>
            </DataColumn>
            <DataColumn>
              <ClientEvent name="onRenderCell">jQuery(arg.dom).empty();&#xD;
jQuery(arg.dom).xCreate(&#xD;
		{&#xD;
		    tagName: &quot;A&quot;,&#xD;
		    href: &quot;#&quot;,&#xD;
		    content:arg.data.get(&quot;fileName&quot;),&#xD;
			style:&quot;margin-right:10px;&quot;,&#xD;
		    onclick: function() {&#xD;
				var action=view.get(&quot;#downloadFileAction&quot;);&#xD;
				var parameter={&#xD;
					excelName:arg.data.get(&quot;fileName&quot;),&#xD;
					url:arg.data.get(&quot;fileUrl&quot;)&#xD;
				}&#xD;
				action.set(&quot;parameter&quot;,parameter).execute();&#xD;
	    	}&#xD;
		});</ClientEvent>
              <Property name="caption">附件</Property>
              <Editor/>
            </DataColumn>
          </DataGrid>
          <DownloadAction id="downloadFileAction">
            <Property name="fileProvider">importTempletExcelController#downTempletExcelImport</Property>
          </DownloadAction>
          <Dialog id="operDescDialog">
            <Property name="width">400</Property>
            <Property name="height">450</Property>
            <Buttons/>
            <Children>
              <AutoForm>
                <Property name="dataSet">dsBillCheckLog</Property>
                <Property name="dataType">dtBillCheckLog</Property>
                <AutoFormElement>
                  <Property name="name">operateDesc</Property>
                  <Property name="property">operateDesc</Property>
                  <Property name="editorType">TextArea</Property>
                  <Property name="height">400</Property>
                  <Property name="width">360</Property>
                  <Property name="readOnly">true</Property>
                  <Editor/>
                </AutoFormElement>
              </AutoForm>
            </Children>
            <Tools/>
          </Dialog>
        </Container>
      </ControlTab>
    </TabControl>
    <Dialog id="dialogZp">
      <ClientEvent name="onClick">&#xD;
</ClientEvent>
      <Property name="caption">问题指派</Property>
      <Property name="width">400</Property>
      <Property name="height">300</Property>
      <Buttons>
        <Button>
          <ClientEvent name="onClick">var billCheckInfo=view.get(&quot;#dsBillCheckInfoFollow.data&quot;).current;&#xD;
&#xD;
var currentData=view.get(&quot;#dsBillCheckFollow.data&quot;).current;&#xD;
if(!currentData){&#xD;
	dorado.MessageBox.alert(&quot;无数据提交!&quot;)&#xD;
	return;&#xD;
}&#xD;
var remark=currentData.get(&quot;remark&quot;);&#xD;
if(!remark||remark==''){&#xD;
	dorado.MessageBox.alert(&quot;请填写详细描述!&quot;)&#xD;
	return;&#xD;
}&#xD;
&#xD;
if(billCheckInfo!=''){&#xD;
	currentData.set(&quot;billName&quot;,billCheckInfo.get(&quot;billName&quot;));&#xD;
}&#xD;
&#xD;
var  action=view.get(&quot;#questionZpAction&quot;);&#xD;
action.execute(function(result){&#xD;
	if(result>0){&#xD;
		dorado.MessageBox.alert(&quot;指派成功!&quot;);&#xD;
	}else{&#xD;
		dorado.MessageBox.alert(&quot;保存失败!&quot;)&#xD;
	}&#xD;
	view.get(&quot;#dialogZp&quot;).hide();&#xD;
})&#xD;
</ClientEvent>
          <Property name="caption">指派</Property>
          <Property name="style">
            <Property name="margin-right">30px</Property>
          </Property>
        </Button>
        <Button>
          <ClientEvent name="onClick">view.get(&quot;#dialogZp&quot;).hide();</ClientEvent>
          <Property name="caption">取消</Property>
        </Button>
      </Buttons>
      <Children>
        <AutoForm id="editForm">
          <Property name="dataSet">dsBillCheckFollow</Property>
          <Property name="cols">*</Property>
          <AutoFormElement>
            <Property name="name">followManId</Property>
            <Property name="property">followManId</Property>
            <Property name="hint">人员</Property>
            <Property name="trigger">triggerDeptUserSelect</Property>
            <Property name="editable">false</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">followDept</Property>
            <Property name="property">followDept</Property>
            <Property name="label">部门</Property>
            <Property name="readOnly">true</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">remark</Property>
            <Property name="property">remark</Property>
            <Property name="editorType">TextArea</Property>
            <Property name="height">100</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">fileName</Property>
            <Property name="property">fileName</Property>
            <Editor>
              <Container layout="hbox">
                <TextEditor id="txtFileName2">
                  <Property name="editable">false</Property>
                  <Property name="width">150</Property>
                  <Property name="readOnly">true</Property>
                </TextEditor>
                <Button>
                  <Property name="caption">导入</Property>
                  <Property name="action">uploadFile2Action</Property>
                </Button>
              </Container>
            </Editor>
          </AutoFormElement>
        </AutoForm>
        <UploadAction id="uploadFile2Action">
          <ClientEvent name="beforeFileUpload">var fname = arg.file.name;&#xD;
view.id(&quot;txtFileName2&quot;).set(&quot;text&quot;,fname);&#xD;
var entity=view.get(&quot;#dsBillCheckFollow.data&quot;).current;&#xD;
entity.set({&#xD;
	fileName:fname&#xD;
});&#xD;
</ClientEvent>
          <ClientEvent name="onFileUploaded">var data= arg.returnValue;&#xD;
var entity=view.get(&quot;#dsBillCheckFollow.data&quot;).current;&#xD;
entity.set({&#xD;
	filePath:data&#xD;
});&#xD;
</ClientEvent>
          <Property name="fileResolver">billCheckFollowController#uploadFile</Property>
          <Filters/>
        </UploadAction>
        <UpdateAction id="questionZpAction">
          <Property name="dataResolver">billCheckFollowController#questionZP</Property>
          <UpdateItem>
            <Property name="dataSet">dsBillCheckFollow</Property>
            <Property name="dataPath">[#current]</Property>
          </UpdateItem>
        </UpdateAction>
      </Children>
      <Tools/>
    </Dialog>
    <Dialog id="dialogCallBack">
      <Property name="caption">问题反馈</Property>
      <Property name="width">400</Property>
      <Property name="height">250</Property>
      <Buttons>
        <Button>
          <ClientEvent name="onClick">var currentData=view.get(&quot;#dsBillCheckCallBack.data&quot;).current;&#xD;
if(!currentData){&#xD;
	dorado.MessageBox.alert(&quot;无数据提交!&quot;)&#xD;
	return;&#xD;
}&#xD;
var remark=currentData.get(&quot;remark&quot;);&#xD;
if(!remark||remark==''){&#xD;
	dorado.MessageBox.alert(&quot;请填写详细描叙!&quot;)&#xD;
	return;&#xD;
}&#xD;
var  action=view.get(&quot;#continueDealAction&quot;);&#xD;
action.execute(function(result){&#xD;
	if(result>0){&#xD;
		var entity=view.get(&quot;#dsBillCheckInfoFollow.data&quot;).current;&#xD;
		with (view.get(&quot;#dsBillCheckLog&quot;)){&#xD;
			var followId=entity.get(&quot;followId&quot;);&#xD;
			if(!followId){&#xD;
				followId=-1;&#xD;
			}&#xD;
			//定义查询条件json结构&#xD;
			var queryJson={&#xD;
				billFollowId:followId&#xD;
			};&#xD;
			set(&quot;parameter&quot;, queryJson);&#xD;
			flushAsync();	&#xD;
		};&#xD;
		&#xD;
		var data=view.get(&quot;#dsBillCheckInfoFollowQuery.data&quot;).current;&#xD;
		view.get(&quot;#dsBillCheckInfoFollow&quot;).set(&quot;parameter&quot;,data).flushAsync();&#xD;
	}else{&#xD;
		dorado.MessageBox.alert(&quot;保存失败!&quot;)&#xD;
	}&#xD;
	view.get(&quot;#dialogCallBack&quot;).hide();&#xD;
})&#xD;
&#xD;
</ClientEvent>
          <Property name="caption">继续处理</Property>
          <Property name="style">
            <Property name="margin-right">30px</Property>
          </Property>
        </Button>
        <Button>
          <ClientEvent name="onClick">var currentData=view.get(&quot;#dsBillCheckCallBack.data&quot;).current;&#xD;
if(!currentData){&#xD;
	dorado.MessageBox.alert(&quot;无数据提交!&quot;)&#xD;
	return;&#xD;
}&#xD;
var remark=currentData.get(&quot;remark&quot;);&#xD;
if(!remark||remark==''){&#xD;
	dorado.MessageBox.alert(&quot;请填写详细描叙!&quot;)&#xD;
	return;&#xD;
}&#xD;
var  action=view.get(&quot;#finishFollowAction&quot;);&#xD;
action.execute(function(result){&#xD;
	if(result>0){&#xD;
		var entity=view.get(&quot;#dsBillCheckInfoFollow.data&quot;).current;&#xD;
		with (view.get(&quot;#dsBillCheckLog&quot;)){&#xD;
			var followId=entity.get(&quot;followId&quot;);&#xD;
			if(!followId){&#xD;
				followId=-1;&#xD;
			}&#xD;
			//定义查询条件json结构&#xD;
			var queryJson={&#xD;
				billFollowId:followId&#xD;
			};&#xD;
			set(&quot;parameter&quot;, queryJson);&#xD;
			flushAsync();	&#xD;
		};&#xD;
		&#xD;
		var data=view.get(&quot;#dsBillCheckInfoFollowQuery.data&quot;).current;&#xD;
		view.get(&quot;#dsBillCheckInfoFollow&quot;).set(&quot;parameter&quot;,data).flushAsync();&#xD;
	}else{&#xD;
		dorado.MessageBox.alert(&quot;保存失败!&quot;)&#xD;
	}&#xD;
	view.get(&quot;#dialogCallBack&quot;).hide();&#xD;
})&#xD;
&#xD;
</ClientEvent>
          <Property name="caption">处理完成</Property>
        </Button>
      </Buttons>
      <Children>
        <AutoForm>
          <Property name="dataSet">dsBillCheckCallBack</Property>
          <Property name="cols">*</Property>
          <AutoFormElement>
            <Property name="name">remark</Property>
            <Property name="property">remark</Property>
            <Property name="editorType">TextArea</Property>
            <Property name="height">100</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">fileName</Property>
            <Property name="property">fileName</Property>
            <Editor>
              <Container layout="hbox">
                <TextEditor id="txtFileName">
                  <Property name="editable">false</Property>
                  <Property name="width">150</Property>
                  <Property name="readOnly">true</Property>
                </TextEditor>
                <Button>
                  <Property name="caption">导入</Property>
                  <Property name="action">uploadFileAction</Property>
                </Button>
              </Container>
            </Editor>
          </AutoFormElement>
        </AutoForm>
        <UpdateAction id="continueDealAction">
          <Property name="dataResolver">billCheckFollowController#continueDeal</Property>
          <UpdateItem>
            <Property name="dataSet">dsBillCheckCallBack</Property>
            <Property name="dataPath">[#current]</Property>
          </UpdateItem>
        </UpdateAction>
        <UploadAction id="uploadFileAction">
          <ClientEvent name="beforeFileUpload">var fname = arg.file.name;&#xD;
view.id(&quot;txtFileName&quot;).set(&quot;text&quot;,fname);&#xD;
var entity=view.get(&quot;#dsBillCheckCallBack.data&quot;).current;&#xD;
entity.set({&#xD;
	fileName:fname&#xD;
});&#xD;
</ClientEvent>
          <ClientEvent name="onFileUploaded">var data= arg.returnValue;&#xD;
var entity=view.get(&quot;#dsBillCheckCallBack.data&quot;).current;&#xD;
entity.set({&#xD;
	filePath:data&#xD;
});&#xD;
</ClientEvent>
          <Property name="fileResolver">billCheckFollowController#uploadFile</Property>
          <Filters/>
        </UploadAction>
        <UpdateAction id="finishFollowAction">
          <Property name="dataResolver">billCheckFollowController#finishProcess</Property>
          <UpdateItem>
            <Property name="dataSet">dsBillCheckCallBack</Property>
            <Property name="dataPath">[#current]</Property>
          </UpdateItem>
        </UpdateAction>
      </Children>
      <Tools/>
    </Dialog>
    <Trigger id="triggerDeptUserSelect">
      <ClientEvent name="onExecute">view.get(&quot;#dialogDeptUser&quot;).show();&#xD;
</ClientEvent>
    </Trigger>
    <Dialog id="dialogDeptUser">
      <ClientEvent name="onHide">var data=view.get(&quot;#subviewDeptUser.userData&quot;);&#xD;
if(data!=null){&#xD;
	view.get(&quot;#editForm.entity&quot;).set(&quot;followManId&quot;,data.userId);&#xD;
	view.get(&quot;#editForm.entity&quot;).set(&quot;followMan&quot;,data.userName);&#xD;
	view.get(&quot;#editForm.entity&quot;).set(&quot;followDeptId&quot;,data.deptId);&#xD;
	view.get(&quot;#editForm.entity&quot;).set(&quot;followDept&quot;,data.deptName);&#xD;
	view.get(&quot;#editForm.entity&quot;).set(&quot;email&quot;,data.email);&#xD;
}&#xD;
</ClientEvent>
      <Property name="width">900</Property>
      <Property name="height">500</Property>
      <Property name="caption">用户选择</Property>
      <Buttons/>
      <Children>
        <SubViewHolder id="subviewDeptUser">
          <Property name="subView">com.jiuyescm.bms.lookup.view.DeptUserLookUp</Property>
        </SubViewHolder>
      </Children>
      <Tools/>
    </Dialog>
    <Trigger id="triggerBalanceSelect">
      <ClientEvent name="onExecute">view.get(&quot;#dialogDeptUser2&quot;).show();&#xD;
</ClientEvent>
    </Trigger>
    <Dialog id="dialogDeptUser2">
      <ClientEvent name="onHide">var data=view.get(&quot;#subviewDeptUser2.userData&quot;);&#xD;
if(data!=null){&#xD;
	view.get(&quot;#queryForm.entity&quot;).set(&quot;balanceName&quot;,data.userName);&#xD;
}&#xD;
</ClientEvent>
      <Property name="width">900</Property>
      <Property name="height">500</Property>
      <Property name="caption">用户选择</Property>
      <Buttons/>
      <Children>
        <SubViewHolder id="subviewDeptUser2">
          <Property name="subView">com.jiuyescm.bms.lookup.view.DeptUserLookUp</Property>
        </SubViewHolder>
      </Children>
      <Tools/>
    </Dialog>
  </View>
</ViewConfig>
