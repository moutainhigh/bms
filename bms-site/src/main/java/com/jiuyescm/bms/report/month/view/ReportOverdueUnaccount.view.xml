<?xml version="1.0" encoding="UTF-8"?>
<ViewConfig>
  <Arguments/>
  <Context/>
  <Model>
    <DataType name="dtReportOverdueUnaccountQuery">
      <PropertyDef name="sellerId">
        <Property name="label">销售员</Property>
      </PropertyDef>
      <PropertyDef name="sellerName">
        <Property name="label">销售员</Property>
      </PropertyDef>
      <PropertyDef name="area">
        <Property name="label">区域</Property>
      </PropertyDef>
      <PropertyDef name="overdueUnaccount">
        <Property name="label">超期未收款金额</Property>
      </PropertyDef>
      <PropertyDef name="receiveAccount">
        <Property name="label">应收款金额</Property>
      </PropertyDef>
      <PropertyDef name="overdueUnaccountRatio">
        <Property name="label">超期未收款占比</Property>
      </PropertyDef>
      <PropertyDef name="createMonth">
        <Property name="label">查询月份</Property>
      </PropertyDef>
      <PropertyDef name="year">
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;omsEnumPR#getReportMonthForYear&quot;).getResult()}</Property>
        </Property>
        <Property name="readOnly">false</Property>
        <Property name="label">年份</Property>
        <Property name="required">true</Property>
      </PropertyDef>
      <PropertyDef name="month">
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;feesPayImportController#getAllMonth&quot;).getResult()}</Property>
        </Property>
        <Property name="label">月份</Property>
        <Property name="required">true</Property>
      </PropertyDef>
    </DataType>
    <DataType name="dtReportOverdueUnaccountEntity">
      <Property name="creationType">com.jiuyescm.bms.report.month.entity.ReportIncomesSubjectEntity</Property>
      <PropertyDef name="sellerId">
        <Property name="label">销售员</Property>
      </PropertyDef>
      <PropertyDef name="sellerName">
        <Property name="label">销售员</Property>
      </PropertyDef>
      <PropertyDef name="area">
        <Property name="label">区域</Property>
      </PropertyDef>
      <PropertyDef name="overdueUnaccount">
        <Property name="label">超期未收款金额</Property>
      </PropertyDef>
      <PropertyDef name="receiveAccount">
        <Property name="label">应收款金额</Property>
      </PropertyDef>
      <PropertyDef name="overdueUnaccountRatio">
        <Property name="label">超期未收款占比</Property>
      </PropertyDef>
    </DataType>
  </Model>
  <View>
    <ClientEvent name="onReady">var date=new Date;  &#xD;
var year=date.getFullYear();  &#xD;
var month=date.getMonth();&#xD;
view.get(&quot;#formCondition.entity&quot;).set(&quot;year&quot;,year);&#xD;
view.get(&quot;#formCondition.entity&quot;).set(&quot;month&quot;,month);</ClientEvent>
    <DataSet id="dsReportOverdueUnaccountEntity">
      <Property name="dataProvider">reportIncomesSubjectController#queryAll</Property>
      <Property name="readOnly">false</Property>
      <Property name="dataType">[dtReportOverdueUnaccountEntity]</Property>
      <Property name="loadMode">manual</Property>
    </DataSet>
    <DataSet id="dsReportOverdueUnaccountQuery">
      <ClientEvent name="onCreate">view.get(&quot;#dsReportOverdueUnaccountQuery&quot;).getData().insert();&#xD;
		  </ClientEvent>
      <Property name="dataType">[dtReportOverdueUnaccountQuery]</Property>
    </DataSet>
    <AutoForm id="formCondition">
      <Property name="dataType">dtReportOverdueUnaccountQuery</Property>
      <Property name="createPrivateDataSet">true</Property>
      <Property name="cols">220,220,220,220,*</Property>
      <Property name="labelWidth">100</Property>
      <Property name="dataSet">dsReportOverdueUnaccountQuery</Property>
      <AutoFormElement>
        <Property name="name">year</Property>
        <Property name="property">year</Property>
        <Property name="showHint">false</Property>
        <Editor/>
      </AutoFormElement>
      <AutoFormElement>
        <Property name="name">month</Property>
        <Property name="property">month</Property>
        <Property name="showHint">false</Property>
        <Editor/>
      </AutoFormElement>
      <AutoFormElement>
        <Property name="name">sellerId</Property>
        <Property name="property">sellerId</Property>
        <Property name="labelWidth">80</Property>
        <Property name="readOnly">false</Property>
        <Property name="editable">false</Property>
        <Property name="showHint">false</Property>
        <Editor/>
      </AutoFormElement>
      <AutoFormElement>
        <Property name="name">area</Property>
        <Property name="property">area</Property>
        <Property name="labelWidth">80</Property>
        <Property name="editable">false</Property>
        <Property name="showHint">false</Property>
        <Editor/>
      </AutoFormElement>
      <Button>
        <ClientEvent name="onClick">/**&#xD;
 * &#xD;
&#xD;
var data = view.get(&quot;#dsReportOverdueUnaccountQuery.data&quot;).current;&#xD;
var year=data.get(&quot;reportYear&quot;);&#xD;
if(!year){&#xD;
	year=&quot;&quot;;&#xD;
	dorado.MessageBox.alert(&quot;请选择年份！&quot;);&#xD;
	return;&#xD;
}else{&#xD;
	year=year+&quot;年 &quot;;&#xD;
}&#xD;
var sellerName=data.get(&quot;sellerName&quot;);&#xD;
var sellerId=data.get(&quot;sellerId&quot;);&#xD;
if(!sellerName){&#xD;
	sellerName=&quot;&quot;;&#xD;
}else{&#xD;
	if(sellerId!=&quot;&quot;){&#xD;
		sellerName=sellerName+&quot; &quot;;&#xD;
	}else{&#xD;
		sellerName=&quot;&quot;;&#xD;
	}&#xD;
}&#xD;
var wareHouseCode=data.get(&quot;warehouseCode&quot;);&#xD;
if(!wareHouseCode){&#xD;
	wareHouseCode=&quot;&quot;;&#xD;
}else{&#xD;
	wareHouseCode=wareHouseCode+&quot; &quot;;&#xD;
}&#xD;
&#xD;
this.id(&quot;lblTitle&quot;).set(&quot;text&quot;,year+sellerName+wareHouseCode+&quot;收入科目分析&quot;);&#xD;
with (view.get(&quot;#dsReportIncomesSubjectEntity&quot;)){&#xD;
	set(&quot;parameter&quot;, data);&#xD;
	flushAsync();&#xD;
}&#xD;
&#xD;
 */&#xD;
</ClientEvent>
        <Property name="caption">查询</Property>
        <Property name="icon">url(>skin>common/icons.gif) -20px -40px</Property>
      </Button>
    </AutoForm>
    <DataGrid>
      <Property name="dataSet">dsReportOverdueUnaccountEntity</Property>
      <Property name="stretchColumnsMode">auto</Property>
      <Property name="readOnly">true</Property>
      <Property name="groupProperty">businessCode</Property>
      <Property name="groupOnSort">false</Property>
      <RowNumColumn/>
      <DataColumn>
        <Property name="property">sellerName</Property>
        <Property name="name">sellerName</Property>
      </DataColumn>
      <DataColumn>
        <Property name="property">area</Property>
        <Property name="name">area</Property>
      </DataColumn>
      <DataColumn>
        <Property name="property">overdueUnaccount</Property>
        <Property name="name">overdueUnaccount</Property>
      </DataColumn>
      <DataColumn>
        <Property name="property">receiveAccount</Property>
        <Property name="name">receiveAccount</Property>
      </DataColumn>
      <DataColumn>
        <Property name="property">overdueUnaccountRatio</Property>
      </DataColumn>
    </DataGrid>
  </View>
</ViewConfig>
